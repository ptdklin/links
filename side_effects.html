<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Справочник по побочным эффектам ПТП</title>
    <style>
        /* Все стили остаются без изменений */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 600;
        }
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .search-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        #searchInput {
            flex: 1;
            min-width: 250px;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        #searchInput:focus {
            outline: none;
            border-color: #3498db;
        }
        .symptoms-dropdown {
            position: relative;
            width: 100%;
            margin-bottom: 20px;
        }
        .symptoms-select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }
        .symptoms-select:focus {
            outline: none;
            border-color: #3498db;
        }
        .drug-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .drug-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
            border-left: 5px solid #3498db;
        }
        .drug-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }
        .drug-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .drug-abbr {
            background: #ecf0f1;
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.9em;
            color: #7f8c8d;
        }
        .side-effects {
            margin-top: 10px;
        }
        .side-effect-item {
            background: #f8f9fa;
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            border-left: 3px solid #e74c3c;
        }
        .detail-view {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: none;
        }
        .back-btn {
            background: #95a5a6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: background 0.3s;
            font-size: 14px;
        }
        .back-btn:hover {
            background: #7f8c8d;
        }
        .effect-section {
            margin: 25px 0;
            padding: 20px;
            border-radius: 8px;
        }
        .symptoms {
            background: #fff5f5;
            border-left: 4px solid #e74c3c;
        }
        .monitoring {
            background: #f0f8ff;
            border-left: 4px solid #3498db;
        }
        .prevention {
            background: #f0fff4;
            border-left: 4px solid #27ae60;
        }
        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
            font-size: 1.1em;
        }
        .no-results {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-size: 1.1em;
        }
        .symptom-group {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .symptom-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        #symptomsView {
            display: none;
        }
        @media (max-width: 768px) {
            .drug-grid {
                grid-template-columns: 1fr;
            }
            .search-box {
                flex-direction: column;
            }
            #searchInput {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Справочник по побочным эффектам ПТП</h1>
            <div class="subtitle">Препараты и побочные эффекты</div>
        </header>

        <div class="search-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Поиск по препарату или симптому...">
            </div>
            
            <div class="symptoms-dropdown">
                <select id="symptomsSelect" class="symptoms-select">
                    <option value="">Выберите симптом для поиска...</option>
                    <!-- Список симптомов будет сгенерирован автоматически -->
                </select>
            </div>
            
            <div id="searchResults"></div>
        </div>

        <div id="symptomsView" style="display: none;">
            <button class="back-btn" onclick="showDrugList()">← Назад к списку</button>
            <div id="symptomsContent"></div>
        </div>

        <div class="drug-grid" id="drugGrid">
            <!-- Карточки препаратов будут сгенерированы здесь -->
        </div>

        <div class="detail-view" id="detailView">
            <!-- Детальная информация о препарате -->
        </div>
    </div>

    <script>
        // ПОЛНЫЕ ДАННЫЕ О ВСЕХ ПРЕПАРАТАХ - В АЛФАВИТНОМ ПОРЯДКЕ
        const drugsData = [
            {
                id: 'amikacin',
                name: 'Амикацин',
                abbr: 'Am',
                effects: [
                    {
                        name: 'Ототоксичность, Вестибулотоксичность',
                        symptoms: 'Шум в ушах, снижение слуха на фоне лечения. Головокружение, неустойчивость, тошнота, рвота, нистагм',
                        monitoring: 'Аудиограмма ежемесячно',
                        prevention: 'Избегать совместного назначения с диуретиками, НПВП, без учета функции почек и веса'
                    },
                    {
                        name: 'Нефротоксичность',
                        symptoms: 'Олигурия, жажда, отеки, сонливость, тошнота',
                        monitoring: 'Общий анализ мочи ежемесячно, уровень креатинина и мочевины крови, расчет клиренса креатинина',
                        prevention: 'Питьевой режим (не менее 1,5 л жидкости в сутки)'
                    }
                ]
            },
            {
                id: 'amoxicillin_clavulanate',
                name: 'Амоксициллин + клавулановая кислота',
                abbr: 'Amx',
                effects: [
                    {
                        name: 'Диарея',
                        symptoms: 'Учащение стула, водянистая диарея',
                        monitoring: 'Контроль частоты и характера стула. При водянистой диарее 4 раза в сутки и более – экспресс-анализ фекалий на токсины C.difficile',
                        prevention: 'Избегать длительного приема антисекреторных препаратов. Пробиотики'
                    },
                    {
                        name: 'Тошнота и рвота',
                        symptoms: 'Тошнота, рвота, снижение аппетита',
                        monitoring: 'При появлении клинических симптомов – внеплановый контроль АЛТ, АСТ, креатинина, электролитов',
                        prevention: 'Прием препарата в начале еды. Коррекция дозы с учетом функции почек'
                    }
                ]
            },
            {
                id: 'bedaquiline',
                name: 'Бедаквилин',
                abbr: 'Bq',
                effects: [
                    {
                        name: 'Удлинение интервала QT',
                        symptoms: 'Симптомы аритмии, жалобы на боли и дискомфорт в области сердца, эпизоды резкой слабости и головокружения, синкопальные состояния',
                        monitoring: 'ЭКГ (интервал QTс) еженедельно в первый месяц лечения, затем не реже одного раза в месяц. Контроль уровня калия и магния крови',
                        prevention: 'Коррекция уровня электролитов. Избегать одновременного приема с препаратами, удлиняющими интервал QT'
                    },
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ раз в 2 недели в течение первых двух месяцев интенсивной фазы лечения, далее ежемесячно',
                        prevention: 'Избегать назначения пациентам с тяжелой патологией печени. Гепатопротекторы'
                    },
                    {
                        name: 'Тошнота и рвота',
                        symptoms: 'Тошнота, рвота, снижение аппетита',
                        monitoring: 'При появлении клинических симптомов – внеплановый контроль АЛТ, АСТ, креатинина, электролитов',
                        prevention: 'Прием препарата во время еды, с легким перекусом или на ночь'
                    },
                    {
                        name: 'Артралгии',
                        symptoms: 'Боли в суставах',
                        monitoring: 'Клинический осмотр',
                        prevention: 'Симптоматическое лечение'
                    }
                ]
            },
            {
                id: 'cycloserine',
                name: 'Циклосерин',
                abbr: 'Cs',
                effects: [
                    {
                        name: 'Периферическая нейропатия',
                        symptoms: 'Чувство жжения и покалывания, онемение, слабость и боль в ногах',
                        monitoring: 'Оценка вибрационной чувствительности и сухожильных рефлексов. При симптомах – контроль уровня креатинина, электролитов, глюкозы, ТТГ',
                        prevention: 'Коррекция дозы с учетом веса и функции почек. Избегать совместного приема с имипенемом/циластатином'
                    },
                    {
                        name: 'Психоз',
                        symptoms: 'Бред, галлюцинации, резкое нарушение поведения пациента',
                        monitoring: 'При симптомах – внеплановый контроль креатинина и глюкозы крови; анализ мочи на этанол/психоактивные вещества',
                        prevention: 'Консультация психиатра, коррекция дозы'
                    },
                    {
                        name: 'Судороги',
                        symptoms: 'Судорожные приступы с потерей сознания или без',
                        monitoring: 'При симптомах – внеплановый контроль креатинина и глюкозы крови, консультация невролога, электроэнцефалография',
                        prevention: 'Коррекция дозы, отмена при тяжелых судорогах'
                    },
                    {
                        name: 'Депрессия',
                        symptoms: 'Подавленное настроение, астения, потеря интереса, снижение психомоторных реакций, нарушение сна и аппетита в течение двух недель и более',
                        monitoring: 'При появлении симптомов – контроль ТТГ по показаниям, консультация психотерапевта, психиатра',
                        prevention: 'Коррекция дозы, психологическая поддержка'
                    }
                ]
            },
            {
                id: 'ethambutol',
                name: 'Этамбутол',
                abbr: 'E',
                effects: [
                    {
                        name: 'Неврит зрительного нерва',
                        symptoms: 'Снижение зрения, появление скотом и сужение полей зрения, болезненность при движении глаза, нарушение цветоощущения',
                        monitoring: 'Консультация врача-офтальмолога с оценкой состояния глазного дна ежемесячно',
                        prevention: 'Коррекция дефицита питания, гиповитаминоза, коррекция дозы препарата с учетом функции почек, тщательный контроль гликемии у пациентов с сахарным диабетом'
                    },
                    {
                        name: 'Тошнота и рвота',
                        symptoms: 'Тошнота, рвота, снижение аппетита',
                        monitoring: 'Оценка жалоб, контроль электролитов при частой рвоте',
                        prevention: 'Прием после еды, дробный прием'
                    }
                ]
            },
            {
                id: 'ethionamide',
                name: 'Этионамид',
                abbr: 'Eto',
                effects: [
                    {
                        name: 'Тошнота и рвота',
                        symptoms: 'Тошнота, рвота, снижение аппетита, боли и дискомфорт в эпигастрии, метеоризм, отрыжка',
                        monitoring: 'При появлении клинических симптомов – внеплановый контроль АЛТ, АСТ, креатинина, амилазы, электролитов',
                        prevention: 'Дробный прием (тремя отдельными дозами), прием на ночь, с легким перекусом. Лечение сопутствующих заболеваний ЖКТ'
                    },
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ раз в 2 недели в течение первых двух месяцев лечения, далее ежемесячно',
                        prevention: 'Избегать назначения пациентам с тяжелой патологией печени. Гепатопротекторы'
                    },
                    {
                        name: 'Гипотиреоз',
                        symptoms: 'Усталость, слабость, запоры, потеря аппетита, сухость кожи, ломкость и выпадение волос, симптомы депрессии',
                        monitoring: 'Контроль уровня ТТГ каждые 6 месяцев',
                        prevention: 'Заместительная терапия при необходимости'
                    },
                    {
                        name: 'Депрессия',
                        symptoms: 'Подавленное настроение, астения, потеря интереса, нарушения сна и аппетита',
                        monitoring: 'Оценка психического состояния, контроль ТТГ по показаниям',
                        prevention: 'Коррекция дозы, психологическая поддержка'
                    }
                ]
            },
            {
                id: 'isoniazid',
                name: 'Изониазид',
                abbr: 'H',
                effects: [
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ',
                        prevention: 'Избегать назначения пациентам с хронической патологией печени'
                    },
                    {
                        name: 'Периферическая нейропатия',
                        symptoms: 'Чувство жжения и покалывания, онемение, слабость и боль в ногах',
                        monitoring: 'Оценка вибрационной чувствительности и сухожильных рефлексов',
                        prevention: 'Пиридоксин 25-50 мг/сут, коррекция дозы'
                    },
                    {
                        name: 'Судороги',
                        symptoms: 'Судорожные приступы с потерей сознания или без',
                        monitoring: 'При симптомах – консультация невролога, электроэнцефалография',
                        prevention: 'Коррекция дозы, контроль функции почек'
                    }
                ]
            },
            {
                id: 'kanamycin',
                name: 'Канамицин',
                abbr: 'K',
                effects: [
                    {
                        name: 'Ототоксичность, Вестибулотоксичность',
                        symptoms: 'Шум в ушах, снижение слуха на фоне лечения. Головокружение, неустойчивость, тошнота, рвота, нистагм',
                        monitoring: 'Аудиограмма ежемесячно',
                        prevention: 'Избегать совместного назначения с диуретиками, НПВП, без учета функции почек и веса'
                    },
                    {
                        name: 'Нефротоксичность',
                        symptoms: 'Олигурия, жажда, отеки, сонливость, тошнота',
                        monitoring: 'Общий анализ мочи ежемесячно, уровень креатинина и мочевины крови, расчет клиренса креатинина, K+, Mg++, Ca++ ежемесячно; у пациентов группы риска – 2 раза в месяц',
                        prevention: 'Питьевой режим (не менее 1,5 л жидкости в сутки). Избегать совместного назначения с диуретиками, НПВП'
                    }
                ]
            },
            {
                id: 'levofloxacin',
                name: 'Левофлоксацин',
                abbr: 'Lfx',
                effects: [
                    {
                        name: 'Удлинение интервала QT. Нарушение ритма сердца',
                        symptoms: 'Симптомы аритмии, эпизоды резкой слабости, головокружения, сердцебиения, пресинкопальных и синкопальных состояний',
                        monitoring: 'ЭКГ (интервал QTс) еженедельно в первый месяц лечения, затем не реже одного раза в месяц. Контроль уровня калия и магния крови ежемесячно',
                        prevention: 'Избегать совместного приема с препаратами, удлиняющими интервал QT на ЭКГ'
                    },
                    {
                        name: 'Диарея',
                        symptoms: 'Учащение стула, водянистая диарея',
                        monitoring: 'Контроль частоты и характера стула. При водянистой диарее 4 раза в сутки и более – экспресс-анализ фекалий на токсины C.difficile',
                        prevention: 'Избегать длительного приема антисекреторных препаратов. Пробиотики'
                    },
                    {
                        name: 'Судороги',
                        symptoms: 'Судорожные приступы, мышечные спазмы',
                        monitoring: 'При симптомах – контроль уровня электролитов, глюкозы, консультация невролога',
                        prevention: 'Коррекция дозы с учетом функции почек'
                    },
                    {
                        name: 'Артралгия, тендинит',
                        symptoms: 'Боли в суставах, симптомы отека и гиперемии в области сухожилий',
                        monitoring: 'Клинический осмотр',
                        prevention: 'Избегать совместного приема с преднизолоном'
                    }
                ]
            },
            {
                id: 'linezolid',
                name: 'Линезолид',
                abbr: 'Lzd',
                effects: [
                    {
                        name: 'Миелосупрессия (анемия, тромбоцитопения, лейкопения)',
                        symptoms: 'Слабость, утомляемость, геморрагический синдром, лихорадка',
                        monitoring: 'Клинический анализ крови в интенсивной фазе лечения не реже 1 раза в месяц (еженедельно при миелосупрессии в анамнезе)',
                        prevention: 'Пиридоксин 50-100 мг/сут. При миелосупрессии в анамнезе – доза менее 600 мг/сут'
                    },
                    {
                        name: 'Диарея',
                        symptoms: 'Учащение стула, изменение характера стула',
                        monitoring: 'Контроль частоты и характера стула',
                        prevention: 'Пробиотики, коррекция дозы'
                    },
                    {
                        name: 'Периферическая нейропатия',
                        symptoms: 'Чувство жжения и покалывания, онемение, слабость и боль в ногах',
                        monitoring: 'При появлении клинических симптомов – контроль уровня электролитов, глюкозы, ТТГ, консультация невролога',
                        prevention: 'Коррекция дефицита питания, гиповитаминоза'
                    },
                    {
                        name: 'Оптическая нейропатия',
                        symptoms: 'Изменение остроты зрения, изменение цветового восприятия, дефекты полей зрения',
                        monitoring: 'Консультация офтальмолога с оценкой состояния глазного дна ежемесячно',
                        prevention: 'Коррекция дефицита питания, гиповитаминоза; тщательный контроль гликемии у пациентов с сахарным диабетом'
                    }
                ]
            },
            {
                id: 'pas',
                name: 'ПАСК',
                abbr: 'PAS',
                effects: [
                    {
                        name: 'Диарея, тошнота и рвота, гастрит',
                        symptoms: 'Тошнота и рвота, диарея, боли и дискомфорт в эпигастрии, метеоризм, отрыжка',
                        monitoring: 'При появлении клинических симптомов – внеплановый контроль АЛТ, АСТ, креатинина, амилазы, электролитов',
                        prevention: 'Использование гранулированных форм, назначение низкой стартовой дозы с постепенным наращиванием, прием через 1 ч после приема других препаратов, с легким перекусом, на ночь'
                    },
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ раз в 2 недели в течение первых двух месяцев, далее ежемесячно',
                        prevention: 'Избегать назначения пациентам с тяжелой патологией печени. Гепатопротекторы'
                    },
                    {
                        name: 'Гипотиреоз',
                        symptoms: 'Усталость, слабость, запоры, потерю аппетита, сухость кожи, ломкость и выпадение волос, симптомы депрессии',
                        monitoring: 'Контроль уровня ТТГ каждые 6 месяцев',
                        prevention: 'Заместительная терапия при необходимости'
                    }
                ]
            },
            {
                id: 'protionamide',
                name: 'Протионамид',
                abbr: 'Pto',
                effects: [
                    {
                        name: 'Тошнота и рвота, гастрит',
                        symptoms: 'Тошнота, рвота, снижение аппетита, боли и дискомфорт в эпигастрии, метеоризм, отрыжка',
                        monitoring: 'При появлении клинических симптомов – внеплановый контроль АЛТ, АСТ, креатинина, амилазы, электролитов',
                        prevention: 'Дробный прием (тремя отдельными дозами), прием на ночь, с легким перекусом. Лечение сопутствующих заболеваний ЖКТ'
                    },
                    {
                        name: 'Диарея',
                        symptoms: 'Учащение стула, изменение характера стула',
                        monitoring: 'Контроль частоты и характера стула',
                        prevention: 'Коррекция дозы, пробиотики'
                    },
                    {
                        name: 'Депрессия',
                        symptoms: 'Подавленное настроение, потеря интереса к жизни, нарушения сна',
                        monitoring: 'Оценка психического состояния, при необходимости – консультация психиатра',
                        prevention: 'Коррекция дозы, психологическая поддержка'
                    },
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ раз в 2 недели в течение первых двух месяцев лечения, далее ежемесячно',
                        prevention: 'Избегать назначения пациентам с тяжелой патологией печени. Гепатопротекторы'
                    },
                    {
                        name: 'Гипотиреоз',
                        symptoms: 'Усталость, слабость, запоры, потерю аппетита, сухость кожи, ломкость и выпадение волос, симптомы депрессии',
                        monitoring: 'Контроль уровня ТТГ каждые 6 месяцев',
                        prevention: 'Заместительная терапия при необходимости'
                    }
                ]
            },
            {
                id: 'pyrazinamide',
                name: 'Пиразинамид',
                abbr: 'Z',
                effects: [
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ раз в 2 недели в течение первых двух месяцев интенсивной фазы лечения, далее ежемесячно',
                        prevention: 'Избегать назначения пациентам с хронической патологией печени. Гепатопротекторы при наличии факторов риска гепатита'
                    },
                    {
                        name: 'Гиперурикемия, артралгии',
                        symptoms: 'Боли в суставах, симптомы артрита',
                        monitoring: 'Контроль уровня мочевой кислоты крови не реже 1 раза в месяц, при хронической болезни почек – 1 раз в 2 недели',
                        prevention: 'Прием не менее 1,5 л жидкости в сутки (слабощелочное питье). Диета (избегать белковых перегрузок и приема алкоголя)'
                    }
                ]
            },
            {
                id: 'rifampicin',
                name: 'Рифампицин',
                abbr: 'R',
                effects: [
                    {
                        name: 'Гепатит',
                        symptoms: 'Тошнота, рвота, потеря аппетита, слабость, темная моча, светлый стул, боли в правом подреберье, зуд, симптомы желтухи',
                        monitoring: 'Контроль уровня билирубина, АЛТ, АСТ',
                        prevention: 'Избегать назначения пациентам с тяжелой патологией печени'
                    },
                    {
                        name: 'Желудочно-кишечные расстройства',
                        symptoms: 'Тошнота, рвота, диарея, боли в животе',
                        monitoring: 'Контроль частоты и характера стула',
                        prevention: 'Прием во время еды, дробный прием'
                    }
                ]
            },
            {
                id: 'streptomycin',
                name: 'Стрептомицин',
                abbr: 'S',
                effects: [
                    {
                        name: 'Ототоксичность',
                        symptoms: 'Шум в ушах, снижение слуха на фоне лечения',
                        monitoring: 'Аудиограмма ежемесячно',
                        prevention: 'Избегать совместного назначения с диуретиками, НПВП'
                    },
                    {
                        name: 'Нефротоксичность',
                        symptoms: 'Олигурия, жажда, отеки, сонливость, тошнота',
                        monitoring: 'Общий анализ мочи ежемесячно, уровень креатинина и мочевины крови, расчет клиренса креатинина',
                        prevention: 'Питьевой режим (не менее 1,5 л жидкости в сутки)'
                    }
                ]
            },
            {
                id: 'terizidone',
                name: 'Теризидон',
                abbr: 'Trd',
                effects: [
                    {
                        name: 'Депрессия',
                        symptoms: 'Подавленное настроение, астения, потеря интереса, снижение психомоторных реакций, нарушение сна и аппетита',
                        monitoring: 'При появлении симптомов – контроль ТТГ по показаниям, консультация психотерапевта',
                        prevention: 'Коррекция дозы, психологическая поддержка'
                    },
                    {
                        name: 'Периферическая нейропатия',
                        symptoms: 'Чувство жжения и покалывания, онемение, слабость и боль в ногах',
                        monitoring: 'Оценка вибрационной чувствительности и сухожильных рефлексов',
                        prevention: 'Коррекция дозы с учетом веса и функции почек'
                    }
                ]
            }
        ];

        // РУЧНОЙ СПИСОК СИМПТОМОВ С ПРЕПАРАТАМИ, КОТОРЫЕ ИХ ВЫЗЫВАЮТ
        const symptomsData = [
            {
                id: 'аритмия',
                name: '1. Аритмия',
                drugIds: ['bedaquiline', 'levofloxacin'] // 2 препарата
            },
            {
                id: 'артралгия',
                name: '2. Артралгия (боли в суставах)',
                drugIds: ['bedaquiline', 'levofloxacin', 'pyrazinamide', 'pas'] // 4 препарата
            },
            {
                id: 'гепатит',
                name: '3. Гепатит (поражение печени)',
                drugIds: ['bedaquiline', 'ethionamide', 'isoniazid', 'pas', 'protionamide', 'pyrazinamide', 'rifampicin'] // 7 препаратов
            },
            {
                id: 'гиперурикемия',
                name: '4. Гиперурикемия',
                drugIds: ['pyrazinamide'] // 1 препарат
            },
            {
                id: 'гипотиреоз',
                name: '5. Гипотиреоз',
                drugIds: ['ethionamide', 'pas', 'protionamide'] // 3 препарата
            },
            {
                id: 'депрессия',
                name: '6. Депрессия',
                drugIds: ['cycloserine', 'ethionamide', 'protionamide', 'terizidone'] // 4 препарата
            },
            {
                id: 'диарея',
                name: '7. Диарея',
                drugIds: ['amoxicillin_clavulanate', 'levofloxacin', 'linezolid', 'pas', 'protionamide', 'rifampicin'] // 6 препаратов
            },
            {
                id: 'кожные',
                name: '8. Кожные реакции',
                drugIds: ['bedaquiline', 'ethionamide', 'isoniazid', 'levofloxacin', 'linezolid', 'pas', 'protionamide', 'pyrazinamide', 'rifampicin'] // 9 препаратов
            },
            {
                id: 'миелосупрессия',
                name: '9. Миелосупрессия',
                drugIds: ['linezolid'] // 1 препарат
            },
            {
                id: 'зрение',
                name: '10. Нарушение зрения',
                drugIds: ['ethambutol', 'linezolid'] // 2 препарата
            },
            {
                id: 'нейропатия',
                name: '11. Нейропатия периферическая',
                drugIds: ['cycloserine', 'isoniazid', 'linezolid', 'terizidone'] // 4 препарата
            },
            {
                id: 'нефротоксичность',
                name: '12. Нефротоксичность (поражение почек)',
                drugIds: ['amikacin', 'kanamycin', 'streptomycin'] // 3 препарата
            },
            {
                id: 'ототоксичность',
                name: '13. Ототоксичность (поражение слуха)',
                drugIds: ['amikacin', 'kanamycin', 'streptomycin'] // 3 препарата
            },
            {
                id: 'психоз',
                name: '14. Психоз',
                drugIds: ['cycloserine'] // 1 препарат
            },
            {
                id: 'судороги',
                name: '15. Судороги',
                drugIds: ['cycloserine', 'isoniazid', 'levofloxacin'] // 3 препарата
            },
            {
                id: 'тошнота',
                name: '16. Тошнота и рвота',
                drugIds: ['amoxicillin_clavulanate', 'bedaquiline', 'ethambutol', 'ethionamide', 'isoniazid', 'pas', 'protionamide', 'pyrazinamide', 'rifampicin'] // 9 препаратов
            }
        ];

        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            initializeSymptomsDropdown();
            renderDrugCards(drugsData);
            setupEventListeners();
        });

        // Инициализация выпадающего списка симптомов
        function initializeSymptomsDropdown() {
            const symptomsSelect = document.getElementById('symptomsSelect');
            
            symptomsData.forEach(symptom => {
                const option = document.createElement('option');
                option.value = symptom.id;
                option.textContent = symptom.name;
                symptomsSelect.appendChild(option);
            });
        }

        // Рендер карточек препаратов
        function renderDrugCards(drugs) {
            const grid = document.getElementById('drugGrid');
            grid.innerHTML = '';

            if (drugs.length === 0) {
                grid.innerHTML = '<div class="no-results">Препараты не найдены</div>';
                return;
            }

            drugs.forEach(drug => {
                const card = document.createElement('div');
                card.className = 'drug-card';
                card.innerHTML = `
                    <div class="drug-name">${drug.name} <span class="drug-abbr">${drug.abbr}</span></div>
                    <div class="side-effects">
                        ${drug.effects.map(effect => 
                            `<div class="side-effect-item">${effect.name}</div>`
                        ).join('')}
                    </div>
                `;
                card.addEventListener('click', () => showDrugDetails(drug));
                grid.appendChild(card);
            });
        }

        // Показать детали препарата
        function showDrugDetails(drug) {
            const detailView = document.getElementById('detailView');
            const grid = document.getElementById('drugGrid');
            const symptomsView = document.getElementById('symptomsView');
            
            grid.style.display = 'none';
            symptomsView.style.display = 'none';
            detailView.style.display = 'block';
            
            detailView.innerHTML = `
                <button class="back-btn" onclick="showDrugList()">← Назад к списку</button>
                <h2>${drug.name} (${drug.abbr})</h2>
                ${drug.effects.map(effect => `
                    <div class="effect-section">
                        <h3 style="color: #e74c3c; margin-bottom: 15px;">${effect.name}</h3>
                        <div class="symptoms">
                            <div class="section-title">На что обратить внимание:</div>
                            <div>${effect.symptoms}</div>
                        </div>
                        <div class="monitoring">
                            <div class="section-title">Мониторинг:</div>
                            <div>${effect.monitoring}</div>
                        </div>
                        <div class="prevention">
                            <div class="section-title">Профилактика и меры:</div>
                            <div>${effect.prevention}</div>
                        </div>
                    </div>
                `).join('')}
            `;
            
            detailView.scrollIntoView({ behavior: 'smooth' });
        }

        // Показать список препаратов
        function showDrugList() {
            const detailView = document.getElementById('detailView');
            const grid = document.getElementById('drugGrid');
            const symptomsView = document.getElementById('symptomsView');
            
            detailView.style.display = 'none';
            symptomsView.style.display = 'none';
            grid.style.display = 'grid';
        }

        // Настройка обработчиков событий
        function setupEventListeners() {
            const searchInput = document.getElementById('searchInput');
            const symptomsSelect = document.getElementById('symptomsSelect');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterDrugs(searchTerm);
            });
            
            symptomsSelect.addEventListener('change', function() {
                const selectedSymptomId = this.value;
                if (selectedSymptomId) {
                    const symptom = symptomsData.find(s => s.id === selectedSymptomId);
                    if (symptom) {
                        showSymptomsView(symptom);
                    }
                } else {
                    showDrugList();
                }
            });
        }

        // Показать представление симптомов
        function showSymptomsView(symptom) {
            const symptomsView = document.getElementById('symptomsView');
            const symptomsContent = document.getElementById('symptomsContent');
            const drugGrid = document.getElementById('drugGrid');
            const detailView = document.getElementById('detailView');
            
            drugGrid.style.display = 'none';
            detailView.style.display = 'none';
            symptomsView.style.display = 'block';
            
            const drugsForSymptom = drugsData.filter(drug => 
                symptom.drugIds.includes(drug.id)
            );
            
            symptomsContent.innerHTML = `
                <h2>Препараты, вызывающие: ${symptom.name}</h2>
                <div style="margin: 20px 0; padding: 15px; background: #e8f6f3; border-radius: 8px;">
                    <strong>Всего препаратов:</strong> ${drugsForSymptom.length}
                </div>
                
                ${drugsForSymptom.map(drug => {
                    const relevantEffects = drug.effects.filter(effect => {
                        // Показываем все эффекты препарата, так как мы уже знаем, что он вызывает этот симптом
                        return true;
                    });
                    
                    return `
                    <div class="symptom-group">
                        <div class="symptom-title">${drug.name} (${drug.abbr})</div>
                        
                        ${relevantEffects.map(effect => `
                            <div style="margin-top: 10px;">
                                <div><strong>Проявление:</strong> ${effect.name}</div>
                                <div><strong>Симптомы:</strong> ${effect.symptoms}</div>
                            </div>
                        `).join('')}
                        
                        <button onclick="showDrugDetails(${JSON.stringify(drug).replace(/"/g, '&quot;')})" 
                                style="margin-top: 10px; padding: 8px 15px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;">
                            Подробнее о препарате
                        </button>
                    </div>
                `}).join('')}
                
                ${drugsForSymptom.length === 0 ? `
                    <div class="no-results">
                        Нет информации о препаратах для этого симптома
                    </div>
                ` : ''}
            `;
            
            symptomsView.scrollIntoView({ behavior: 'smooth' });
        }

        // Фильтрация препаратов по поисковому запросу
        function filterDrugs(searchTerm) {
            if (!searchTerm) {
                renderDrugCards(drugsData);
                return;
            }
            
            const filteredDrugs = drugsData.filter(drug => {
                // Поиск по названию препарата и аббревиатуре
                if (drug.name.toLowerCase().includes(searchTerm) || drug.abbr.toLowerCase().includes(searchTerm)) {
                    return true;
                }
                
                // Поиск по всем эффектам препарата
                return drug.effects.some(effect => {
                    const effectText = (effect.name + ' ' + effect.symptoms + ' ' + effect.monitoring + ' ' + effect.prevention).toLowerCase();
                    return effectText.includes(searchTerm);
                });
            });
            
            renderDrugCards(filteredDrugs);
        }
    </script>
</body>
</html>